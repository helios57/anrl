<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Using Google Earth and Maps API</title>
    <script type="text/javascript" src="http://maps.google.com/maps?file=api&v=2.x&key=3VcA"></script>
    <script type="text/javascript">
    /* <![CDATA[ */
    
    var ge = null;
    var map = null;
	  var application = null;
    var geocoder = null;

    var init_ = function()
    {
      application = window.external;
      map = new GMap2(document.getElementById("map"));
      geocoder = new GClientGeocoder();
      
      map.setCenter(new GLatLng(51.5,0),8); 
      map.setMapType(G_SATELLITE_3D_MAP);
      map.getEarthInstance(function(object) 
        { 
          ge = object;
          application.Ready(ge);
        });
    }

	  var loadKmlCallBack_ = function(kmlObject)
	  {
		  if (kmlObject)
      {
			  application.LoadKmlCallBack(kmlObject);
		  }
      else
      {
        application.Error("Kml failed to load");
		  }
	  }

	  var jsFetchKml = function(url)
	  {
		  google.earth.fetchKml(ge, url, loadKmlCallBack_);
	  }
  
	  var jsDoGeocode = function(address)
	  {
		  geocoder.getLatLng(address, function(point)
		  {
			  if (point)
			  {
				  return(point);
			  }
		  });
	  } 
    
    /* ]]> */
    </script>
    <style type="text/css">
      html, body {
        margin:0px;
      }
      #map  {
        display:block;
        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:100%;
      }
    </style>
  </head>
  <body onload="init_()">
    <div id="map" class="map"></div>
  </body>
</html>